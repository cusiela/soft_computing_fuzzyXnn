<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neuro-Fuzzy Medical Diagnosis System</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="bg-gradient"></div>
    
    <nav class="navbar">
        <div class="nav-brand">
            <span class="logo">üß†</span>
            <span>NeuroFuzzy<span class="accent">MedDx</span></span>
        </div>
        <div class="nav-links">
            <a href="#diagnosis" class="nav-link active">Diagnosis</a>
            <a href="#eda" class="nav-link">Analisis</a>
            <a href="#metrics" class="nav-link">Performa</a>
        </div>
        <div class="nav-status">
            <span class="status-dot"></span>
            <span id="system-status">Sistem Siap digunakan</span>
        </div>
    </nav>

    <header class="hero">
        <div class="hero-content">
            <h1>Prediksi <span class="gradient-text">Resiko Stroke</span></h1>
            <p>Hybrid Fuzzy Expert System + Neural Network untuk akurasi diagnosis</p>
            <div class="hero-stats">
                <div class="stat"><span id="accuracy-stat">--</span><small>akurasi</small></div>
                <div class="stat"><span id="auc-stat">--</span><small>AUC-ROC</small></div>
                <div class="stat"><span id="records-stat">--</span><small>Data</small></div>
            </div>
        </div>
    </header>

    <main class="main-content">
        <section id="diagnosis" class="section">
            <h2 class="section-title">ü©∫ Assesmen Pasien</h2>
            
            <div class="diagnosis-grid">
                <div class="card form-card">
                    <h3>Informasi Pasien</h3>
                    <form id="diagnosis-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="age">üéÇ Umur (tahun)</label>
                                <input type="number" id="age" name="age" min="0" max="120" value="50" required>
                            </div>
                            <div class="form-group">
                                <label for="bmi">‚öñÔ∏è BMI (kg/m¬≤)</label>
                                <input type="number" id="bmi" name="bmi" min="10" max="60" step="0.1" value="25" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="glucose">ü©∏ Rerata Glukosa Darah (mg/dL)</label>
                            <input type="number" id="glucose" name="avg_glucose_level" min="50" max="300" step="0.01" value="100" required>
                            <div class="glucose-bar">
                                <span class="low">Rendah</span>
                                <span class="normal">Normal</span>
                                <span class="high">Tinggi</span>
                            </div>
                        </div>
                        
                        <div class="form-row toggles">
                            <div class="toggle-group">
                                <span>‚ù§Ô∏è Hipertensi</span>
                                <label class="switch">
                                    <input type="checkbox" id="hypertension" name="hypertension">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="toggle-group">
                                <span>ü´Ä Penyakit Jantung</span>
                                <label class="switch">
                                    <input type="checkbox" id="heart_disease" name="heart_disease">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                        
                        <button type="submit" class="submit-btn" id="analyze-btn">
                            <span>üîç Menganalisa Resiko</span>
                        </button>
                    </form>
                </div>
                
                <div class="card results-card" id="results-panel">
                    <h3>üìä Hasil Diagnosis</h3>
                    <div id="results-content">
                        <div class="placeholder">
                            <p>Masukkan Data Pasien dan Klik <strong>Analisis Resiko</strong></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="eda" class="section">
            <h2 class="section-title">üìà Analisis Data</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon stroke">‚ö†Ô∏è</div>
                    <div class="stat-info">
                        <span class="stat-number" id="eda-stroke-cases">--</span>
                        <span class="stat-label">Stroke</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon healthy">‚úÖ</div>
                    <div class="stat-info">
                        <span class="stat-number" id="eda-no-stroke">--</span>
                        <span class="stat-label">Tidak Stroke</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon rate">üìä</div>
                    <div class="stat-info">
                        <span class="stat-number" id="eda-stroke-rate">--%</span>
                        <span class="stat-label">Nilai Stroke</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon total">üìÅ</div>
                    <div class="stat-info">
                        <span class="stat-number" id="eda-total">--</span>
                        <span class="stat-label">Total Rekaman Data</span>
                    </div>
                </div>
            </div>
            
            <div class="charts-grid">
                <div class="card chart-card">
                    <h4></h4>
                    <canvas id="ageChart"></canvas>
                </div>
                <div class="card chart-card">
                    <h4>Stroke berdasarkan umur</h4>
                    <canvas id="strokeAgeChart"></canvas>
                </div>
                <div class="card chart-card">
                    <h4>Faktor Resiko</h4>
                    <canvas id="riskFactorsChart"></canvas>
                </div>
                <div class="card chart-card">
                    <h4>Persebaran Data Glukosa</h4>
                    <canvas id="glucoseChart"></canvas>
                </div>
            </div>
        </section>

        <section id="metrics" class="section">
            <h2 class="section-title">üéØ Performa Model</h2>
            
            <div class="metrics-grid">
                <div class="metric-card accuracy">
                    <span class="metric-value" id="metric-accuracy">--</span>
                    <span class="metric-label">akurasi</span>
                    <div class="metric-bar"><div class="metric-fill" id="accuracy-bar"></div></div>
                </div>
                <div class="metric-card sensitivity">
                    <span class="metric-value" id="metric-sensitivity">--</span>
                    <span class="metric-label">Sensitivitas</span>
                    <div class="metric-bar"><div class="metric-fill" id="sensitivity-bar"></div></div>
                </div>
                <div class="metric-card specificity">
                    <span class="metric-value" id="metric-specificity">--</span>
                    <span class="metric-label">Ketegasan</span>
                    <div class="metric-bar"><div class="metric-fill" id="specificity-bar"></div></div>
                </div>
                <div class="metric-card auc">
                    <span class="metric-value" id="metric-auc">--</span>
                    <span class="metric-label">AUC-ROC</span>
                    <div class="metric-bar"><div class="metric-fill" id="auc-bar"></div></div>
                </div>
            </div>
            
            <div class="charts-row">
                <div class="card chart-card wide">
                    <h4>ROC Curve</h4>
                    <canvas id="rocChart"></canvas>
                </div>
                <div class="card confusion-card">
                    <h4>Confusion Matrix</h4>
                    <div class="confusion-matrix" id="confusion-matrix">
                        <div class="cm-header"></div>
                        <div class="cm-header">Pred: 0</div>
                        <div class="cm-header">Pred: 1</div>
                        <div class="cm-label">Actual: 0</div>
                        <div class="cm-cell tn" id="cm-tn">--</div>
                        <div class="cm-cell fp" id="cm-fp">--</div>
                        <div class="cm-label">Actual: 1</div>
                        <div class="cm-cell fn" id="cm-fn">--</div>
                        <div class="cm-cell tp" id="cm-tp">--</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>NeuroFuzzy Medical Diagnosis System dengan Fuzzy Expert System + Neural Network</p>
        <p>Oleh Dion dkk</p>
    </footer>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
